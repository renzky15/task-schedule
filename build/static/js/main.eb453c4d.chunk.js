(this["webpackJsonptask-schedule"]=this["webpackJsonptask-schedule"]||[]).push([[0],{163:function(t,e,n){},165:function(t,e,n){},245:function(t,e){},302:function(t,e,n){"use strict";n.r(e);var a=n(3),s=n(0),r=n.n(s),c=n(20),o=n.n(c),i=(n(163),n(164),n(165),n(29)),u=n(77),l=n(76),d=[],p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_TASK":return[].concat(Object(l.a)(t),[e.task_payload]);case"FETCH_TASKS":return Object(l.a)(e.task_payload);case"REMOVE_TASK":return t.filter((function(t){return t.id!==e.id}));case"EDIT_TASK":return t.map((function(t){return t.id===e.id?Object(u.a)(Object(u.a)({},t),e.updates):t}));default:return t}},h=n(154),b=n(59),j=n(57),f=n(58),g=n(61),k=n(60),m=n(156),v=n(4),O=n.n(v),x=n(157),_=(n(236),n(237),function(t){Object(g.a)(n,t);var e=Object(k.a)(n);function n(t){var a;return Object(j.a)(this,n),(a=e.call(this,t)).onDescriptionChange=function(t){var e=t.target.value;a.setState((function(){return{task_msg:e}}))},a.onDateChange=function(t){t&&a.setState((function(){return{task_date:t}}))},a.onTimeChange=function(t){var e=t.target.value;a.setState((function(){return{task_time:e}}))},a.onAssignedUser=function(t){var e=t.target.value;a.setState((function(){return{assigned_user:e}}))},a.onFocusChange=function(t){var e=t.focused;a.setState((function(){return{calendarFocused:e}}))},a.onSubmit=function(t){t.preventDefault(),a.state.task_date&&a.state.task_time?(a.setState((function(){return{error:""}})),console.log("Form submitted!"),a.props.onSubmit({task_date:a.state.task_date.format("YYYY-MM-DD"),task_msg:a.state.task_msg,task_time:parseInt(a.state.task_time),assigned_user:a.state.assigned_user}),a.props.toggleClosed({toggleForm:!1}),a.setState((function(){return{}}))):a.setState((function(){return{error:"Please provide date and time."}}))},a.onCancel=function(){a.props.toggleClosed({toggleForm:!1}),a.setState((function(){return{}}))},a.state={id:t.task?t.task.id:x(),task_msg:t.task?t.task.task_msg:"",task_date:t.task?O()(t.task.task_date):O()(),task_time:t.task?t.task.task_time:0,calendarFocused:!1},a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var t=JSON.parse(localStorage.getItem("currentUser"));this.setState({currentUser:t,assigned_user:t.result.id})}},{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"task-form-container",children:[this.state.error&&Object(a.jsx)("p",{style:{color:"red"},children:this.state.error}),Object(a.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(a.jsxs)("div",{className:"desc-container",children:[Object(a.jsx)("label",{children:"Task Description"}),Object(a.jsx)("input",{type:"test",name:"task_msg",placeholder:"Description",autoFocus:!0,onChange:this.onDescriptionChange,value:this.state.task_msg})]}),Object(a.jsxs)("div",{className:"date-time-container",children:[Object(a.jsxs)("div",{className:"date-container",children:[Object(a.jsx)("label",{children:"Date"}),Object(a.jsx)(m.SingleDatePicker,{date:this.state.task_date,onDateChange:this.onDateChange,focused:this.state.calendarFocused,onFocusChange:this.onFocusChange,numberOfMonths:1})]}),Object(a.jsxs)("div",{className:"time-container",children:[Object(a.jsx)("label",{children:"Time"}),Object(a.jsx)("input",{type:"number",name:"task_time",placeholder:"Time",onChange:this.onTimeChange,value:this.state.task_time})]})]}),Object(a.jsxs)("div",{className:"assign-user-container",children:[Object(a.jsx)("label",{children:"Assign User"}),Object(a.jsx)("input",{type:"text",name:"assigned_user",placeholder:"User",onChange:this.onAssignedUser,value:this.state.assigned_user,disabled:!0})]}),Object(a.jsxs)("div",{className:"buttons-container",children:[Object(a.jsx)("button",{id:"cancel-btn",onClick:this.onCancel,children:"Cancel"}),Object(a.jsx)("button",{id:"save-btn",children:"Save"})]})]})]})})}}]),n}(s.Component)),S=n(9),y=n.n(S),T=n(23),C=n(21),N=n.n(C),w="https://stage.api.sloovi.com";function D(){return E.apply(this,arguments)}function E(){return(E=Object(T.a)(y.a.mark((function t(){var e,n,a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={email:"spicebluetest1@gmail.com",password:"12345678"},n={Accept:"application/json","Content-Type":"application/json"},t.prev=2,t.next=5,N.a.post("".concat(w,"/login"),e,n);case 5:return a=t.sent,console.log(JSON.stringify(a)),localStorage.setItem("login",JSON.stringify({login:!0,token:a.data.results.token})),t.abrupt("return",a.data.status);case 11:t.prev=11,t.t0=t.catch(2),console.log(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[2,11]])})))).apply(this,arguments)}function F(){return A.apply(this,arguments)}function A(){return(A=Object(T.a)(y.a.mark((function t(){var e,n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!("login"in localStorage)){t.next=15;break}return e=JSON.parse(localStorage.getItem("login")),N.a.interceptors.request.use((function(t){return t.headers.authorization="Bearer ".concat(e.token),t}),(function(t){return Promise.reject(t)})),t.prev=3,t.next=6,N.a.get("".concat(w,"/user"));case 6:return n=t.sent,t.abrupt("return",n.data.results);case 10:t.prev=10,t.t0=t.catch(3),console.log("Error.");case 13:t.next=16;break;case 15:alert("Logging in.....");case 16:case"end":return t.stop()}}),t,null,[[3,10]])})))).apply(this,arguments)}var I="https://stage.api.sloovi.com";!function(){if("login"in localStorage){var t=JSON.parse(localStorage.getItem("login"));N.a.interceptors.request.use((function(e){return e.headers.authorization="Bearer ".concat(t.token),e}),(function(t){return Promise.reject(t)}))}else D()}();var M=n(304),U=n(305),J=function(t){Object(g.a)(n,t);var e=Object(k.a)(n);function n(t){var a;return Object(j.a)(this,n),(a=e.call(this,t)).handleShowForm=function(){a.setState({toggleForm:!0})},a.handleEdit=function(t){var e=a.props.task_payload.find((function(e){return e.id===t}));a.setState({selectedTask:e,toggleForm:!0})},a.handleRemove=function(t){a.props.deleteTask(t)},a.state={toggleForm:!1,selectedTask:{}},a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchTask()}},{key:"render",value:function(){var t=this;return Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"main-container",children:[Object(a.jsxs)("div",{className:"first-container",children:[Object(a.jsxs)("div",{className:"task-count",children:[Object(a.jsx)("h4",{children:"Tasks"})," ",this.props.task_payload.length]}),Object(a.jsx)("div",{className:"task-button",children:Object(a.jsx)("button",{onClick:this.handleShowForm,children:"Add Task"})})]}),this.state.toggleForm?Object(a.jsx)(_,{task:this.state.selectedTask,toggleClosed:function(e){return t.setState(e)},onSubmit:function(e){0===Object.keys(t.state.selectedTask).length?t.props.postTask(e):t.props.putTask(t.state.selectedTask.id,e)}}):Object(a.jsx)("div",{}),Object(a.jsx)("div",{className:"task-lists-container",children:this.props.task_payload.map((function(e,n){return Object(a.jsxs)("div",{className:"task-lists",children:[Object(a.jsxs)("div",{className:"list",children:[Object(a.jsx)("label",{children:e.task_msg}),Object(a.jsx)("label",{id:"date-label",children:e.task_date})]}),Object(a.jsxs)("div",{className:"btn-list",children:[Object(a.jsx)("button",{className:"list-edit-btn",onClick:function(){return t.handleEdit(e.id)},children:Object(a.jsx)(M.a,{})}),Object(a.jsx)("button",{className:"list-delete-btn",onClick:function(){return t.handleRemove(e.id)},children:Object(a.jsx)(U.a,{})})]})]},n)}))})]})})}}]),n}(s.Component);var K=Object(b.b)((function(t){return{task_payload:t.task_payload}}),(function(t){return{fetchTask:function(){t(function(){var t=Object(T.a)(y.a.mark((function t(e){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.a.get("".concat(I,"/task/lead_59a79b6cb211449f9698bad058a593e4"));case 3:n=t.sent,e({type:"FETCH_TASKS",task_payload:n.data.results}),console.log(n.data.results),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Error.");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}())},postTask:function(e){var n;t((n=e,function(){var t=Object(T.a)(y.a.mark((function t(e){var a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.a.post("".concat(I,"/task/lead_59a79b6cb211449f9698bad058a593e4"),n);case 3:a=t.sent,e({type:"ADD_TASK",task_payload:n}),console.log(a.data.results),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Error.");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()))},putTask:function(e,n){t(function(t,e){return function(){var n=Object(T.a)(y.a.mark((function n(a){var s;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,N.a.put("".concat(I,"/task/lead_59a79b6cb211449f9698bad058a593e4/").concat(t),e);case 3:s=n.sent,a({type:"EDIT_TASK",updates:e,id:t}),console.log(s.data.results),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log("Error.");case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(t){return n.apply(this,arguments)}}()}(e,n))},deleteTask:function(e){t(function(t){return function(){var e=Object(T.a)(y.a.mark((function e(n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.delete("".concat(I,"/task/lead_59a79b6cb211449f9698bad058a593e4/").concat(t));case 3:a=e.sent,n({type:"REMOVE_TASK",id:t}),console.log(a.data.results),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}(e))}}}))(J),P=n(75),R=r.a.createContext(),Y=function(t){var e=t.children,n=Object(s.useState)(null),r=Object(P.a)(n,2),c=r[0],o=r[1],i=Object(s.useState)(!0),u=Object(P.a)(i,2),l=u[0],d=u[1];return Object(s.useEffect)((function(){function t(){return(t=Object(T.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D();case 2:if(!("login"in localStorage)){t.next=10;break}return t.prev=3,t.next=6,F().then((function(t){localStorage.setItem("currentUser",JSON.stringify({result:t})),o(t),d(!1)}));case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(3);case 10:case"end":return t.stop()}}),t,null,[[3,8]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),l?Object(a.jsx)("div",{className:"loader"}):Object(a.jsx)(R.Provider,{value:{currentUser:c},children:e})},B=function(){var t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d;return Object(i.e)(Object(i.c)({task_payload:p}),t(Object(i.a)(h.a)))}();var V=function(){return Object(a.jsx)(b.a,{store:B,children:Object(a.jsx)(Y,{children:Object(a.jsx)(K,{})})})};o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(V,{})}),document.getElementById("root"))}},[[302,1,2]]]);
//# sourceMappingURL=main.eb453c4d.chunk.js.map