(this["webpackJsonptask-schedule"]=this["webpackJsonptask-schedule"]||[]).push([[0],{162:function(t,e,a){},164:function(t,e,a){},261:function(t,e){},301:function(t,e,a){"use strict";a.r(e);var n=a(3),s=a(0),r=a.n(s),c=a(21),o=a.n(c),i=(a(162),a(163),a(164),a(29)),u=a(77),l=a(76),d=a(10),p=a.n(d),h=a(24),j=a(16),b=a.n(j),f="https://stage.api.sloovi.com",k=JSON.parse(localStorage.getItem("login"));function m(){return(m=Object(h.a)(p.a.mark((function t(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b.a.interceptors.request.use((function(t){return t.headers.authorization="Bearer ".concat(k.token),t}),(function(t){return Promise.reject(t)})),t.prev=1,t.next=4,b.a.get("".concat(f,"/user"));case 4:return e=t.sent,t.abrupt("return",e.data.results);case 8:t.prev=8,t.t0=t.catch(1),console.log("Error.");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}function g(t){return v.apply(this,arguments)}function v(){return(v=Object(h.a)(p.a.mark((function t(e){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b.a.interceptors.request.use((function(t){return t.headers.authorization="Bearer ".concat(k.token),t}),(function(t){return Promise.reject(t)})),t.prev=1,t.next=4,b.a.post("".concat(f,"/task/lead_59a79b6cb211449f9698bad058a593e4"),e);case 4:return a=t.sent,t.abrupt("return",a.data.results);case 8:t.prev=8,t.t0=t.catch(1),console.log("Error.");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}var O=[],_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_TASK":return g(e.payload),[].concat(Object(l.a)(t),[e.task_payload]);case"FETCH_TASKS":return Object(l.a)(e.task_payload);case"REMOVE_TASK":return t.filter((function(t){return t.id!==e.id}));case"EDIT_TASK":return t.map((function(t){return t.id===e.id?Object(u.a)(Object(u.a)({},t),e.updates):t}));default:return t}},x=a(154),S=a(59),y=a(306),C=JSON.parse(localStorage.getItem("login")),T="https://stage.api.sloovi.com";b.a.interceptors.request.use((function(t){return t.headers.authorization="Bearer ".concat(C.token),t}),(function(t){return Promise.reject(t)}));var N=a(57),D=a(58),E=a(61),w=a(60),F=a(156),A=a(4),K=a.n(A),M=(a(252),a(253),function(t){Object(E.a)(a,t);var e=Object(w.a)(a);function a(t){var n;return Object(N.a)(this,a),(n=e.call(this,t)).onDescriptionChange=function(t){var e=t.target.value;n.setState((function(){return{task_msg:e}}))},n.onDateChange=function(t){t&&n.setState((function(){return{task_date:t}}))},n.onTimeChange=function(t){var e=t.target.value;n.setState((function(){return{task_time:e}}))},n.onAssignedUser=function(t){var e=t.target.value;n.setState((function(){return{assigned_user:e}}))},n.onFocusChange=function(t){var e=t.focused;n.setState((function(){return{calendarFocused:e}}))},n.onSubmit=function(t){t.preventDefault(),n.state.task_date&&n.state.task_time?(n.setState((function(){return{error:""}})),console.log("Form submitted!"),n.props.onSubmit({id:n.state.id,task_date:n.state.task_date.format("YYYY-MM-DD"),task_msg:n.state.task_msg,task_time:n.state.task_time.valueOf(),assigned_user:n.state.assigned_user}),n.props.toggleClosed({toggleForm:!1}),n.setState((function(){return{}}))):n.setState((function(){return{error:"Please provide date and time."}}))},n.onCancel=function(){n.props.toggleClosed({toggleForm:!1}),n.setState((function(){return{}}))},n.state={id:t.task?t.task.id:"",task_msg:t.task?t.task.task_msg:"",task_date:t.task?K()(t.task.task_date):K()(),task_time:t.task?t.task.task_time:"",assigned_user:t.task?t.task.assigned_user:"",calendarFocused:!1},n}return Object(D.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"task-form-container",children:[this.state.error&&Object(n.jsx)("p",{style:{color:"red"},children:this.state.error}),Object(n.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(n.jsxs)("div",{className:"desc-container",children:[Object(n.jsx)("label",{children:"Task Description"}),Object(n.jsx)("input",{type:"test",name:"task_msg",placeholder:"Description",autoFocus:!0,onChange:this.onDescriptionChange,value:this.state.task_msg})]}),Object(n.jsxs)("div",{className:"date-time-container",children:[Object(n.jsxs)("div",{className:"date-container",children:[Object(n.jsx)("label",{children:"Date"}),Object(n.jsx)(F.SingleDatePicker,{date:this.state.task_date,onDateChange:this.onDateChange,focused:this.state.calendarFocused,onFocusChange:this.onFocusChange,numberOfMonths:1})]}),Object(n.jsxs)("div",{className:"time-container",children:[Object(n.jsx)("label",{children:"Time"}),Object(n.jsx)("input",{type:"time",name:"task_time",placeholder:"Time",onChange:this.onTimeChange,value:this.state.task_time})]})]}),Object(n.jsxs)("div",{className:"assign-user-container",children:[Object(n.jsx)("label",{children:"Assign User"}),Object(n.jsx)("input",{type:"text",name:"assigned_user",placeholder:"User",onChange:this.onAssignedUser,value:this.state.assigned_user})]}),Object(n.jsxs)("div",{className:"buttons-container",children:[Object(n.jsx)("button",{id:"cancel-btn",onClick:this.onCancel,children:"Cancel"}),Object(n.jsx)("button",{id:"save-btn",children:"Save"})]})]})]})})}}]),a}(s.Component)),P=a(304),I=a(305),U=function(t){Object(E.a)(a,t);var e=Object(w.a)(a);function a(t){var n;return Object(N.a)(this,a),(n=e.call(this,t)).handleShowForm=function(){n.setState({toggleForm:!0})},n.handleEdit=function(t){var e=n.props.task_payload.find((function(e){return e.id===t}));n.setState({selectedTask:e,toggleForm:!0})},n.handleRemove=function(t){n.props.deleteTask(t)},n.state={toggleForm:!1,selectedTask:{}},n}return Object(D.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchTask()}},{key:"render",value:function(){var t=this;return Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"main-container",children:[Object(n.jsxs)("div",{className:"first-container",children:[Object(n.jsxs)("div",{className:"task-count",children:[Object(n.jsx)("h4",{children:"Tasks"})," ",this.props.task_payload.length]}),Object(n.jsx)("div",{className:"task-button",children:Object(n.jsx)("button",{onClick:this.handleShowForm,children:"Add Task"})})]}),this.state.toggleForm?Object(n.jsx)(M,{task:this.state.selectedTask,toggleClosed:function(e){return t.setState(e)},onSubmit:function(e){0===Object.keys(t.state.selectedTask).length?t.props.dispatch(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,a=void 0===e?Object(y.a)():e,n=t.assigned_user,s=void 0===n?"":n,r=t.task_date,c=void 0===r?"":r,o=t.task_time,i=void 0===o?0:o,u=t.task_msg;return{type:"ADD_TASK",task_payload:{id:a,assigned_user:s,task_date:c,task_time:i,task_msg:void 0===u?"":u}}}(e)):t.props.dispatch({type:"EDIT_TASK",id:e.id,updates:e})}}):Object(n.jsx)("div",{}),Object(n.jsx)("div",{className:"task-lists-container",children:Object(n.jsx)("div",{className:"task-lists",children:this.props.task_payload.map((function(e,a){return Object(n.jsxs)("div",{className:"list",children:[Object(n.jsx)("label",{children:e.task_msg}),Object(n.jsx)("label",{children:e.task_date}),Object(n.jsx)("button",{className:"list-edit-btn",onClick:function(){return t.handleEdit(e.id)},children:Object(n.jsx)(P.a,{})}),Object(n.jsx)("button",{className:"list-delete-btn",onClick:function(){return t.handleRemove(e.id)},children:Object(n.jsx)(I.a,{})})]},a)}))})})]})})}}]),a}(s.Component);var J=Object(S.b)((function(t){return{task_payload:t.task_payload}}),(function(t){return{fetchTask:function(){t(function(){var t=Object(h.a)(p.a.mark((function t(e){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.get("".concat(T,"/task/lead_59a79b6cb211449f9698bad058a593e4"));case 3:a=t.sent,e({type:"FETCH_TASKS",task_payload:a.data.results}),console.log(a.data.results),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Error.");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}())},deleteTask:function(e){t(function(t){return function(){var e=Object(h.a)(p.a.mark((function e(a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.delete("".concat(T,"/task/lead_59a79b6cb211449f9698bad058a593e4/").concat(t));case 3:n=e.sent,a({type:"REMOVE_TASK"}),console.log(n.data.results),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}(e))}}}))(U),R=a(75);function B(){return(B=Object(h.a)(p.a.mark((function t(e){var a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={Accept:"application/json","Content-Type":"application/json"},t.prev=1,t.next=4,b.a.post("https://stage.api.sloovi.com/login",e,a);case 4:n=t.sent,localStorage.setItem("login",JSON.stringify({login:!0,token:n.data.results.token})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("Post not created.");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}var Y=r.a.createContext(),q=function(t){var e=t.children,a=Object(s.useState)(null),r=Object(R.a)(a,2),c=r[0],o=r[1],i=Object(s.useState)(!0),u=Object(R.a)(i,2),l=u[0],d=u[1],p={email:"spicebluetest1@gmail.com",password:"12345678"};return Object(s.useEffect)((function(){(function(t){return B.apply(this,arguments)})(p)&&function(){return m.apply(this,arguments)}().then((function(t){o(t),d(!1)}))}),[]),l?Object(n.jsx)("div",{className:"loader"}):Object(n.jsx)(Y.Provider,{value:{currentUser:c},children:e})},z=function(){var t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d;return Object(i.e)(Object(i.c)({task_payload:_}),t(Object(i.a)(x.a)))}();var V=function(){return Object(n.jsx)(S.a,{store:z,children:Object(n.jsx)(q,{children:Object(n.jsx)(J,{})})})};o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(V,{})}),document.getElementById("root"))}},[[301,1,2]]]);
//# sourceMappingURL=main.1c0ef8a5.chunk.js.map